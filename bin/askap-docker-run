#/bin/bash
# Set up the X11 stuff ...
XSOCK=/tmp/.X11-unix
XAUTH=/tmp/.docker.xauth
xauth nlist :0 | sed -e 's/^..../ffff/' | xauth -f $XAUTH nmerge -

# run the specified image
docker run \
 -ti \
 --rm \
 --volume $XSOCK:$XSOCK -v $XAUTH:$XAUTH -e XAUTHORITY=$XAUTH \
 --mount type=bind,source="$(pwd)"/$1,target=/home/askap/code \
 --mount type=bind,source="$HOME/.subversion/",target=/home/askap/.subversion/ \
 $1
